<!DOCTYPE html>
<html lang="en">


<script>

function getRandomInt(max) {
  return Math.floor(Math.random() * max);
}

function replaceImage() {
    seed1 = getRandomInt(99999);
    seed2 = getRandomInt(99999);

    let imgURL1 = "https://picsum.photos/seed/" + seed1 + "/900";
    let imgURL2 = 'https://picsum.photos/seed/' + seed2 + '/900';

    //set the source urls of the images
    document.getElementById("img1").src = imgURL1;
    document.getElementById("img2").src = imgURL2;
    document.getElementById("previewTop").src = imgURL1;
    document.getElementById("previewBottom").src = imgURL2;
    document.getElementById('top').replaceChild(img1, img1);
    document.getElementById('bottom').replaceChild(img2, img2);
    document.getElementById('top').style.mixBlendMode = document.getElementById('blendModeSelector').value

    //set link text/src for layers window
    document.getElementById('topLink').href = imgURL1;
    document.getElementById('bottomLink').href = imgURL2;


}

function updateTopBlur(amount) {
    let blurb = document.getElementById('top');
    blurb.style.filter = "blur("+amount+"px)";

}

function updateBottomBlur(amount) {
    let blurb = document.getElementById('bottom');
    blurb.style.filter = "blur("+amount+"px)";

}

function updateTopBlendMode(mode) {
    
    document.getElementById('top').style.mixBlendMode = mode;
}

function updateBottomBlendMode(mode) {
    
    document.getElementById('bottom').style.mixBlendMode = mode;
}

function updateBackgroundHue(amount) {

    document.getElementById('backgroundSquare').style.filter = "hue-rotate("+amount+"deg)"
}

function updateBackgroundAlpha(amount) {
    document.getElementById('backgroundSquare').style.opacity = amount;
}

function randomizeTop() {
    seed1 = getRandomInt(99999);
    let imgURL1 = "https://picsum.photos/seed/" + seed1 + "/900";
    document.getElementById("img1").src = imgURL1;
    document.getElementById("previewTop").src = imgURL1;
    document.getElementById('top').replaceChild(img1, img1);
    document.getElementById('topLink').href = imgURL1;

}

</script>



<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@20..48,100..700,0..1,-50..200" />
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">
    <link rel="stylesheet" href="css/custom.css">

</head>

<body onload="replaceImage()">


    <!-- MAIN CANVAS -->
    <!-- ------------------------------------------- -->
    
    <div id="top"><img id="img1"></img></div>
    <div id="bottom"><img id="img2"></img></div>
    <div id="backgroundSquare"></div>


    
    <!-- ------------------------------------------- -->

    <!-- CONTROLS SECTION -->
    <div class="controls">

        <!-- Randomize Button -->
        <button class="btn btn-primary" id="btn-randomize" onclick="replaceImage()">RANDOMIZE IMAGES</button>
        <br>
        <br>

        <!-- PREVIEWS/LAYERS -->
        <button class="btn btn-primary" type="button" id="layers-btn" data-bs-toggle="collapse" data-bs-target="#layers" aria-expanded="false"><span class="material-symbols-outlined">layers</span>&nbsp;&nbsp;View Layers </button>
        <br>

                <div id="layers" class="collapse" aria-expanded="false">
                    
                    
                        
            
                        <br>
                        <label>Top&nbsp;</label><a id="topLink" target="_blank">[link to image]</a><br>
                        <img id="previewTop"></img>
                        
                    
            <button class="btn btn-secondary" onclick="randomizeTop()"><span class="material-symbols-outlined">wifi_protected_setup</span></button>            
            <br>
            
                <label>Bottom&nbsp;</label><a id="bottomLink" target="_blank">[link to image]</a><br>
                    <img id="previewBottom"></img>
                    
                    <br><br>
                

            
        
        
        <!-- end collapse -->
        </div> 
        
        <br>
        <!-- Opactiy Sliders -->
        <h2>Alpha</h2>
        <label>Top Alpha</label><br>
        <input class="slider" type="range" id="range" min="0" max="1" step="0.01" value="1" width="500px" oninput="document.getElementById('top').style.opacity = this.value">
        <br>
        <label>Bottom Alpha</label>
        <br>
        <input class="slider" type="range" id="range2" min="0" max="1" step="0.01" value="1" width="500px" oninput="document.getElementById('bottom').style.opacity = this.value">
        <br><br>

        <!-- Blur Sliders -->
        <h2>Blur</h2>
        <label>Top Blur Amount</label>
        <br>
        <input class="slider" type="range" id="range3" min="0" max="30" step="1" value="0" width="500px" oninput=updateTopBlur(this.value);>
        <br>
        <label>Bottom Blur Amount</label>
        <br>
        <input class="slider" type="range" id="range3" min="0" max="30" step="1" value="0" width="500px" oninput=updateBottomBlur(this.value);>
        <br>
        <br>

        <!-- Blend Mode Selectors -->
        <h2>Blend Modes</h2>
        <label>Top Blend Mode</label><br>
        <select id="blendModeSelector" onchange="updateTopBlendMode(this.value)">
            <option value="multiply">Multiply</option>
            <option value="overlay">Overlay</option>
            <option value="difference">Difference</option>
            <option value="screen">Screen</option>
            <option value="color-dodge">Color-Dodge</option>
            <option value="color-burn">Color-Burn</option>
            <option value="hard-light">Hard-Light</option>
            <option value="soft-light">Soft-Light</option>
            <option value="normal">Normal</option>
        </select>
        <br><br>

        <!-- Blend Mode Selectors -->
        <label>Bottom Blend Mode</label><br>
        <select id="blendModeSelector" onchange="updateBottomBlendMode(this.value)">          
            <option value="multiply">Multiply</option>
            <option value="overlay">Overlay</option>
            <option value="difference">Difference</option>
            <option value="screen">Screen</option>
            <option value="color-dodge">Color-Dodge</option>
            <option value="color-burn">Color-Burn</option>
            <option value="hard-light">Hard-Light</option>
            <option value="soft-light">Soft-Light</option>
            <option value="normal">Normal</option>
        </select>
        <br><br>

        <!-- Background Color Hue -->
        <h2>Background Blender</h2>
        <label>Hue</label><br>
        <input class="slider" type="range" id="bg-hue" min="0" max="360" step="1" value="0" width="500px" oninput="updateBackgroundHue(this.value)";>
        <br>
        <label>Alpha</label><br>
        <input class="slider" type="range" id="bg-alpha" min="0" max="1" step="0.01" value="1" width="500px" oninput="updateBackgroundAlpha(this.value)"";>
<br><br><br>


    </div>
    <!-- END CONTROLS DIV -->
    



    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.0/dist/js/bootstrap.bundle.min.js" integrity="sha384-A3rJD856KowSb7dwlZdYEkO39Gagi7vIsF0jrRAoQmDKKtQBHUuLZ9AsSv4jD4Xa" crossorigin="anonymous"></script>

</body>

</html>